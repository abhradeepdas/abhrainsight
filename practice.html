<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Live Code Share â€“ Teacher â†’ Students</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: Arial, sans-serif; background:#f4f6f8; margin:0; padding:20px; }
    h1 { text-align:center; }
    .container { max-width:900px; margin:auto; }
    textarea { width:100%; height:220px; padding:10px; font-family:monospace; font-size:15px; }
    pre { background:#111; color:#0f0; padding:15px; white-space:pre-wrap; }
    .note { color:#555; margin-top:10px; }
  </style>
</head>
<body>
<div class="container">
  <h1>ðŸ“¡ Live Code Share</h1>

  <!-- Teacher types here -->
  <div id="teacherPanel">
  <h3>Teacher Panel (open only on your phone)</h3>
  <textarea id="teacherBox" placeholder="Type SQL / C / Java code here..."></textarea>
</div>

  <hr>

  <!-- Students see this -->
  <h3>Student View (they only open this page)</h3>
  <pre id="studentView"></pre>

  <div class="note">
    Students can directly copy from the green box.
  </div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
// ðŸ”´ STEP 1: Create FREE Firebase project
// ðŸ”´ STEP 2: Paste your config below

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const ref = db.ref("livecode");

const teacherBox = document.getElementById("teacherBox");
const teacherPanel = document.getElementById("teacherPanel");
const studentView = document.getElementById("studentView");

// SIMPLE ROLE SYSTEM
// Open page normally = student
// Open page with ?teacher=1234 = teacher (change 1234 to your own PIN)

const params = new URLSearchParams(window.location.search);
const isTeacher = params.get("teacher") === "1234";

if(!isTeacher){
  teacherPanel.style.display = "none";
}

// Teacher typing â†’ database
if(isTeacher){
teacherBox.addEventListener("input", () => {
    ref.set(teacherBox.value);
}

});

// Students auto receive
ref.on("value", snap => {
  studentView.textContent = snap.val() || "";
});
</script>


<!-- Java Practice Card Added -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
.practice-card { margin-top:40px; }
.practice-card .card { max-width:600px; margin:auto; box-shadow:0 4px 10px rgba(0,0,0,0.1); }
</style>

<div class="container practice-card">
  <div class="card">
    <div class="card-header bg-primary text-white text-center">
      Java Exercise Practice
    </div>

    <div class="card-body text-center">
      <p class="mb-3">W3Schools exercises cannot be embedded due to security restrictions.</p>
      <p class="text-muted small">Click the button below to open the exercise in a secure new tab.</p>

      <a href="https://www.w3schools.com/java/exercise.asp?x=xrcise_syntax1" target="_blank" class="btn btn-success mt-2">
        Open Java Exercise
      </a>

      <hr>

      <p class="small text-muted">
        Mentor: <b>Abhradeep Das</b><br>
        Practice only â€“ return to exam after completion.
      </p>
    </div>
  </div>
</div>

</body>
</html>
